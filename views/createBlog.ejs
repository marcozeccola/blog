<%- include('./partials/header'); -%>
<main>
  <form action="/blogs" enctype="multipart/form-data" method="POST">

    <input type="text" name="author" value='<%= user.email %>'' hidden required>

      <label for="title">Titolo:</label>
      <div class="error" id="titleError"></div> 
      <input type="text" id="title" name="title" required>


      <label for="snippet">In breve:</label>
      <div class="error" id="snippetError"></div> 
      <input type="text" id="snippet" name="snippet" required>

      <label for="category">Categoria:</label>
      <div class="select">
        <select name="category" id="category" required>
             <option value="Kayak">Kayak</option> 
             <option value="Informatica">Informatica</option> 
             <option value="Filosofia">Filosofia</option>
             <option value="Storia">Storia</option> 
             <option value="Telecomunicazioni">Telecomunicazioni</option>
             <option value="Altro">Altro</option> 
        </select>
      </div>


      <label for="body">Testo (RICORDA tutte le immagini che inserisci qui nel body sono poi da caricare pi√π sotto):</label>
      <textarea name="body" id="blogBodyTxarea"></textarea>
      
      <label>Aggiungi le immagini che vuoi siano viste nel carosello principale per prime e poi tutte le immagini che hai inserito nel body:</label>
      <div class="file">
        <label class="file-label">
          <input class="file-input" type="file" name="img" multiple required onChange=' getFileNameWithExt(event)'>
          <span class="file-cta">
            <span class="file-label">
              Scegli immagini 
            </span>
          </span>
        </label>
        <!--vengono qui mostrati i nomi dei file caricati-->
        <div id='uploadedFiles'> </div>
      </div>
      <div class="error" id="fileError"></div> 
      
    <br>

    <!--mostra nomi file fa fare upload-->
    <label class="checkbox" >Controlla le immagini che hai inserito nel body:
      <div class=" error" id="checkboxError"> </div> 
      <input class="checkbox" type="checkbox" id="checkImgBody" required onclick="parseBody()"> 
    </label>
    
    <br>

    <strong>NOMI FILE INSERITI NEL BODY: </strong>

    <div id='toUploadFiles'> </div>

    <br>
    

    <br>
    <div id="blog-submit">Invio</div>

  </form>
</main>

<script src="/js/blogReq.js"></script>
<script src="/js/handleImg.js"></script>

<%- include('./partials/footer'); -%>